<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="robots" content="noindex,nofollow" />
<title>Demandas Recorrentes â€” DIEF/SEFAZ RR</title>

<style>
:root{
  --bg:#f3f7ff;
  --card:#ffffff;
  --text:#0b1b3a;
  --muted:#3c567a;
  --line:rgba(11,27,58,.14);
  --primary:#0a62be;
  --shadow:0 10px 28px rgba(11,27,58,.12);
  --radius:18px;
  --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:var(--sans);
  background:var(--bg);
  color:var(--text);
}

.wrap{max-width:1100px;margin:0 auto;padding:28px 18px 80px;}

h1{font-size:22px;margin:0 0 6px;}
p{margin:0;color:var(--muted);font-size:13px;line-height:1.45;}

.bar{
  margin-top:16px;
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:#fff;
  padding:14px;
  box-shadow:var(--shadow);
}

.search{
  display:flex;
  align-items:center;
  gap:10px;
  border:1px solid var(--line);
  border-radius:999px;
  padding:10px 14px;
}

.search input{
  border:none;
  outline:none;
  width:100%;
  font-size:14px;
}

.chipBar{
  margin-top:10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}

.chips{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  border-radius:999px;
  background:rgba(10,98,190,.12);
  border:1px solid rgba(10,98,190,.3);
  font-size:12px;
}

.chip button{
  border:none;
  background:transparent;
  cursor:pointer;
  font-size:14px;
}

.clearBtn{
  border:1px solid var(--line);
  background:#fff;
  padding:8px 10px;
  border-radius:12px;
  cursor:pointer;
  font-size:12px;
}

.suggestions{
  display:none;
  margin-top:8px;
  border:1px solid var(--line);
  border-radius:12px;
  background:#fff;
  box-shadow:var(--shadow);
}

.suggestions.show{display:block;}

.sugItem{
  padding:10px 12px;
  cursor:pointer;
  font-size:13px;
}

.sugItem:hover,
.sugItem.active{
  background:rgba(10,98,190,.1);
}

.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:16px;
  margin-top:18px;
}

.card{
  background:#fff;
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:var(--shadow);
  cursor:pointer;
}

.card h3{margin:0;font-size:14px;}
.snippet{margin-top:8px;font-size:12px;color:var(--muted);}
.tag{
  font-size:11px;
  background:rgba(10,98,190,.12);
  padding:4px 8px;
  border-radius:999px;
}
</style>
</head>

<body>
<div class="wrap">
  <h1>Demandas Recorrentes â€” DIEF/SEFAZ RR</h1>
  <p>Busca por <strong>tags</strong>. Clique nos cards para detalhes.</p>

  <section class="bar">
    <div class="search">
      ðŸ”Ž <input id="q" placeholder="Digite uma tag (ex.: simples, gim, mei)" />
    </div>

    <div class="chipBar">
      <div class="chips" id="chips"></div>
      <button class="clearBtn" id="clearTags">Limpar filtros</button>
    </div>

    <div class="suggestions" id="suggestions"></div>
  </section>

  <div class="cards" id="cards"></div>
</div>

<script>
const DEMANDS = [
  {
    title:"SolicitaÃ§Ã£o de Baixa â€” MEI",
    summary:"Baixa mediante DSOT sem dÃ©bitos.",
    tags:["baixa","mei","dsot","siate"]
  },
  {
    title:"AlteraÃ§Ã£o de Regime: Normal â†’ Simples Nacional",
    summary:"Atualizar regime e excluir multas indevidas da GIM.",
    tags:["simples","regime","gim","dsot","sn"]
  }
];

const state = { q:"", selectedTags:[] };

const qInput = document.getElementById("q");
const chipsHost = document.getElementById("chips");
const sugHost = document.getElementById("suggestions");
const cardsHost = document.getElementById("cards");

const ALL_TAGS = [...new Set(DEMANDS.flatMap(d=>d.tags))].sort();

function render(){
  cardsHost.innerHTML="";
  const filtered = state.selectedTags.length
    ? DEMANDS.filter(d => state.selectedTags.every(t => d.tags.includes(t)))
    : DEMANDS;

  filtered.forEach(d=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <h3>${d.title}</h3>
      <div class="snippet">${d.summary}</div>
      <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap;">
        ${d.tags.map(t=>`<span class="tag">${t}</span>`).join("")}
      </div>
    `;
    cardsHost.appendChild(c);
  });
}

function renderChips(){
  chipsHost.innerHTML="";
  state.selectedTags.forEach(t=>{
    const chip=document.createElement("span");
    chip.className="chip";
    chip.innerHTML=`${t} <button>âœ•</button>`;
    chip.querySelector("button").onclick=()=>{
      state.selectedTags=state.selectedTags.filter(x=>x!==t);
      renderChips();render();
    };
    chipsHost.appendChild(chip);
  });
}

function updateSuggestions(){
  const q=qInput.value.toLowerCase().trim();
  if(!q){sugHost.classList.remove("show");return;}

  const list=ALL_TAGS.filter(t =>
    t.includes(q) && !state.selectedTags.includes(t)
  );

  sugHost.innerHTML="";
  list.forEach(tag=>{
    const d=document.createElement("div");
    d.className="sugItem";
    d.textContent=tag;
    d.onclick=()=>addTag(tag);
    sugHost.appendChild(d);
  });

  sugHost.classList.toggle("show",list.length>0);
}

function addTag(tag){
  state.selectedTags.push(tag);
  qInput.value="";
  sugHost.classList.remove("show");
  renderChips();render();
}

qInput.addEventListener("input",updateSuggestions);

qInput.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    const first=sugHost.querySelector(".sugItem");
    if(first){addTag(first.textContent);}
  }
});

document.getElementById("clearTags").onclick=()=>{
  state.selectedTags=[];
  renderChips();render();
};

render();
</script>
</body>
</html>
